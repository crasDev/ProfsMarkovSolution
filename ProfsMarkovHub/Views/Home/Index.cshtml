@model IEnumerable<ProfsMarkovHub.Models.Article>

@{
    ViewData["Title"] = "Home";
}

<div class="hero">
    <div id="particles-js"></div>
    <h1 data-aos="fade-down" data-aos-duration="1000">ProfsMarkov Hub</h1>
    <div class="typed-tagline" data-aos="fade-up" data-aos-delay="300">
        <span id="typed-tagline"></span>
    </div>
    <div class="hero-buttons" data-aos="fade-up" data-aos-delay="600">
        <a href="https://www.twitch.tv/profs_markov" target="_blank" class="btn btn-primary me-2">üéÆ Watch Live</a>
        <a asp-controller="Blog" asp-action="Index" class="btn btn-outline-light">üìù Read Blog</a>
    </div>
    <div class="scroll-indicator">‚ñº</div>
</div>

<section class="mb-5">
    <h2 class="text-center mb-4" data-aos="fade-up" style="font-weight: 700; letter-spacing: 1px; text-transform: uppercase;">Latest Posts</h2>
    <div class="blog-grid">
        @{ var delay = 0; }
        @foreach (var article in Model)
        {
            var wordCount = article.Content.Split(' ', StringSplitOptions.RemoveEmptyEntries).Length;
            var readingTime = Math.Max(1, wordCount / 200);

            <a asp-controller="Blog" asp-action="DetailsBySlug" asp-route-slug="@article.Slug" class="blog-card-link" data-aos="fade-up" data-aos-delay="@delay">
                <div class="glass-card blog-card">
                    @if (!string.IsNullOrWhiteSpace(article.ImageUrl))
                    {
                        <div class="blog-image-wrap">
                            <img src="@article.ImageUrl" class="blog-image" alt="@article.Title" />
                        </div>
                    }
                    else
                    {
                        <div class="blog-image-placeholder"><span>üìù</span></div>
                    }
                    <div class="blog-card-body">
                        <div class="blog-card-meta">
                            <span class="blog-date">@article.PublishedAt.ToString("MMM dd, yyyy")</span>
                            <span class="blog-reading-time">@readingTime min read</span>
                        </div>
                        <h3 class="blog-card-title">@article.Title</h3>
                        <p class="blog-card-excerpt">
                            @if (!string.IsNullOrEmpty(article.Excerpt))
                            {
                                @article.Excerpt
                            }
                            else
                            {
                                @(article.Content.Length > 120 ? article.Content[..120] + "..." : article.Content)
                            }
                        </p>
                        @if (article.ArticleTags?.Any() == true)
                        {
                            <div class="blog-tags">
                                @foreach (var at in article.ArticleTags)
                                {
                                    <span class="tag-pill">@at.Tag?.Name</span>
                                }
                            </div>
                        }
                        @if (article.Author != null)
                        {
                            <div class="blog-author">
                                <span>by @article.Author.UserName</span>
                            </div>
                        }
                    </div>
                </div>
            </a>
            delay += 100;
        }
    </div>
</section>
