@model IEnumerable<ProfsMarkovHub.Models.Article>

@{
    ViewData["Title"] = "Home";
}

<div class="hero" style="background-image: linear-gradient(145deg, rgba(0,102,255,0.3), rgba(0,204,102,0.15)), url('/images/hero-bg.jpg'); background-size: cover; background-position: center;">
    <h1>ProfsMarkov Hub</h1>
    <p>Gaming reviews, tech deep-dives, and code experiments ‚Äî live on Twitch.</p>
    <div class="mt-3">
        <a href="https://www.twitch.tv/profs_markov" target="_blank" class="btn btn-primary me-2">üéÆ Watch Live</a>
        <a asp-controller="Blog" asp-action="Index" class="btn btn-outline-light">üìù Read Blog</a>
    </div>
</div>

<section class="mb-5">
    <h2 class="text-center mb-4" style="font-weight: 700; letter-spacing: -0.5px;">Latest Posts</h2>
    <div class="blog-grid">
        @foreach (var article in Model)
        {
            var wordCount = article.Content.Split(' ', StringSplitOptions.RemoveEmptyEntries).Length;
            var readingTime = Math.Max(1, wordCount / 200);

            <a asp-controller="Blog" asp-action="DetailsBySlug" asp-route-slug="@article.Slug" class="blog-card-link">
                <div class="glass-card blog-card">
                    @if (!string.IsNullOrWhiteSpace(article.ImageUrl))
                    {
                        <img src="@article.ImageUrl" class="blog-image" alt="@article.Title" />
                    }
                    else
                    {
                        <div class="blog-image-placeholder"><span>üìù</span></div>
                    }
                    <div class="blog-card-body">
                        <div class="blog-card-meta">
                            <span class="blog-date">@article.PublishedAt.ToString("MMM dd, yyyy")</span>
                            <span class="blog-reading-time">@readingTime min read</span>
                        </div>
                        <h3 class="blog-card-title">@article.Title</h3>
                        <p class="blog-card-excerpt">
                            @if (!string.IsNullOrEmpty(article.Excerpt))
                            {
                                @article.Excerpt
                            }
                            else
                            {
                                @(article.Content.Length > 120 ? article.Content[..120] + "..." : article.Content)
                            }
                        </p>
                        @if (article.ArticleTags?.Any() == true)
                        {
                            <div class="blog-tags">
                                @foreach (var at in article.ArticleTags)
                                {
                                    <span class="tag-pill">@at.Tag?.Name</span>
                                }
                            </div>
                        }
                        @if (article.Author != null)
                        {
                            <div class="blog-author">
                                <span>by @article.Author.UserName</span>
                            </div>
                        }
                    </div>
                </div>
            </a>
        }
    </div>
</section>
