@model ProfsMarkovHub.Models.Article

@{
    ViewData["Title"] = Model.Title;
}

@if (!string.IsNullOrWhiteSpace(Model.ImageUrl))
{
    <div class="article-hero-banner" style="background-image: url('@Model.ImageUrl');">
        <div class="container">
            <div class="blog-article" data-aos="fade-up">
                <h1 class="blog-article-title">@Model.Title</h1>
                <div class="blog-article-meta">
                    <span class="blog-date">@Model.PublishedAt.ToString("MMMM dd, yyyy")</span>
                    @if (ViewData["ReadingTime"] != null)
                    {
                        <span class="blog-reading-time">@ViewData["ReadingTime"] min read</span>
                    }
                    @if (Model.Author != null)
                    {
                        <span class="blog-author-name">by @Model.Author.UserName</span>
                    }
                </div>
                @if (Model.ArticleTags?.Any() == true)
                {
                    <div class="blog-tags mt-2">
                        @foreach (var at in Model.ArticleTags)
                        {
                            <span class="tag-pill">@at.Tag?.Name</span>
                        }
                    </div>
                }
            </div>
        </div>
    </div>
}

<article class="blog-article glass-card p-4 p-md-5" data-aos="fade-up" data-aos-delay="200">
    @if (string.IsNullOrWhiteSpace(Model.ImageUrl))
    {
        <header class="blog-article-header mb-4">
            <h1 class="blog-article-title">@Model.Title</h1>
            <div class="blog-article-meta">
                <span class="blog-date">@Model.PublishedAt.ToString("MMMM dd, yyyy")</span>
                @if (ViewData["ReadingTime"] != null)
                {
                    <span class="blog-reading-time">@ViewData["ReadingTime"] min read</span>
                }
                @if (Model.Author != null)
                {
                    <span class="blog-author-name">by @Model.Author.UserName</span>
                }
            </div>
            @if (Model.ArticleTags?.Any() == true)
            {
                <div class="blog-tags mt-2">
                    @foreach (var at in Model.ArticleTags)
                    {
                        <span class="tag-pill">@at.Tag?.Name</span>
                    }
                </div>
            }
        </header>
    }

    <div class="blog-content">
        @if (ViewData["RenderedContent"] != null)
        {
            @Html.Raw(ViewData["RenderedContent"])
        }
        else
        {
            <div style="white-space: pre-wrap;">@Model.Content</div>
        }
    </div>

    <hr class="my-4" style="border-color: rgba(255,255,255,0.06);" />

    @await Html.PartialAsync("~/Views/Shared/Components/_ShareLinks.cshtml", new ProfsMarkovHub.ViewModels.ShareLinksViewModel
    {
        Title = Model.Title,
        Url = Url.Action("DetailsBySlug", "Blog", new { slug = Model.Slug }, Context.Request.Scheme) ?? string.Empty
    })
</article>

<div class="text-center mt-4" data-aos="fade-up" data-aos-delay="400">
    <a asp-action="Index" class="btn btn-outline-light">‚Üê Back to Blog</a>
</div>
