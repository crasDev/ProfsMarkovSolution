# PR-11: Admin Blog CRUD polish — Status, Scheduling, Slug, Filters, Bulk, SEO

## Summary
Implements Phase 1 enhancements for Admin Blog:
- Status enum + scheduling
- Slug canonicalization & uniqueness validation
- Admin Index filters + bulk actions
- SEO override fields and usage
- Soft-delete safety

## Changes
- Models
  - Article: `Status` (Draft/Published/Scheduled), `PublishedAt?`, `ScheduledAt?`, `IsDeleted`, SEO overrides: `OgTitle?`, `OgDescription?`, `OgImageUrl?`
- Services
  - `PublishService`: status transitions + auto-publish due scheduled
  - `SlugService`: slugify + uniqueness check
- Controllers
  - AdminController: filters (Status/Tag/search) + paging params, Create/Edit with status+scheduling, slug validation, bulk actions (Publish/Unpublish/Delete soft), AutoPublish endpoint
  - BlogController: list only published/non-deleted; apply SEO overrides for OG meta; Details uses overrides when present
  - HomeController: latest published/non-deleted
- Views
  - Admin Create/Edit: Status select, Scheduled datetime, SEO fields, slug auto-suggest
  - Admin Index: filters bar, bulk actions with checkboxes, shows Status/Scheduled/Published
  - Blog/Details, Home/Index, Blog/Index: handle nullable PublishedAt
- Data
  - EF Migration: `PR11_StatusSchedulingSlugSeoSoftDelete` applied to SQLite

## Safety & UX
- Anti-CSRF headers preserved on forms
- `[Authorize(Roles = "Admin")]` retained for AdminController
- Server-side validation for duplicate slug (`ModelState.AddModelError("Slug", ...)`)
- Soft-delete prevents accidental loss

## How to Test
1. Build & run the site: `dotnet run`
2. Admin → Create Article
   - Leave slug empty → auto-suggest appears; try duplicate slug → should show validation error
   - Choose Status=Draft → published date blank
   - Choose Status=Scheduled + date/time → save; run Admin "Run Auto Publish" to publish due items
   - Choose Status=Published → published immediately with current UTC
   - Fill optional SEO overrides → check OG tags set in page head (via ViewData)
3. Admin → Index filters
   - Filter by Status, Tag; Search by title/slug
   - Select multiple → Bulk: Publish/Unpublish/Delete (soft)
4. Public Blog/Home
   - Only Published and non-deleted appear
   - PublishedAt displays correctly
5. Slug uniqueness
   - Trying to use existing slug on Create/Edit returns model validation error

## Screenshots
- [ ] Admin Index — filters & bulk actions
- [ ] Admin Create — status + scheduling + SEO
- [ ] Admin Edit — status + scheduling + SEO

## Notes
- SQLite migration includes table rebuild to set `PublishedAt` nullable; applied successfully.
- Auto-publish is a manual controller action, basic server-side check.

---
Branch: `feature/admin-crud-status-scheduling`
PR URL: https://github.com/crasDev/ProfsMarkovSolution/pull/new/feature/admin-crud-status-scheduling
